(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{881:function(n,t,r){"use strict";r.r(t),r.d(t,{default:function(){return Q}});var e=r(7294),i=r(3789),o=r(1120),a=r(8463),u=r(9912),c=r(2318),l=r(1749),f=r(2655),s=r(1907),h=r(4394),v=r(1237),d=r(318);function y(n,t){var r="undefined"!==typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(!r){if(Array.isArray(n)||(r=function(n,t){if(!n)return;if("string"===typeof n)return m(n,t);var r=Object.prototype.toString.call(n).slice(8,-1);"Object"===r&&n.constructor&&(r=n.constructor.name);if("Map"===r||"Set"===r)return Array.from(n);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return m(n,t)}(n))||t&&n&&"number"===typeof n.length){r&&(n=r);var e=0,i=function(){};return{s:i,n:function(){return e>=n.length?{done:!0}:{done:!1,value:n[e++]}},e:function(n){throw n},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,u=!1;return{s:function(){r=r.call(n)},n:function(){var n=r.next();return a=n.done,n},e:function(n){u=!0,o=n},f:function(){try{a||null==r.return||r.return()}finally{if(u)throw o}}}}function m(n,t){(null==t||t>n.length)&&(t=n.length);for(var r=0,e=new Array(t);r<t;r++)e[r]=n[r];return e}function p(n){return n.length!==new Set(n).size}function g(n,t){for(var r=[],e=n;e<=t;e++)r.push(e);return r}function x(n,t){for(var r=[],e=Math.floor(t/n),i=0;i<n;i++)r.push(i+e*n);return r}function b(n,t){for(var r=[],e=t%n,i=0;i<n;i++)r.push(e+i*n);return r}function w(n,t){return[].concat((0,i.Z)(x(n,t)),(0,i.Z)(b(n,t)))}function j(n,t){return[].concat((0,i.Z)(function(n,t){return[n+Math.floor(t/n),4*n-1-Math.floor(t/n)]}(n,t)),(0,i.Z)(function(n,t){return[t%n,3*n-1-t%n]}(n,t)))}function Z(n,t){if(t<0||t>=4*n)throw new Error("Invalid edge index for grid size.");return t<n?[t,n]:t<2*n?[n-1+n*(t-n),-1]:t<3*n?[n*n-1-(t-2*n),-n]:t<4*n?[n*(n-1)-(t-3*n)*n,1]:[0,0]}var S=r(8216),A=r(5997),C=r(3444),k=r(982),M=r(2953),z=r(2809);function E(n,t){var r="undefined"!==typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(!r){if(Array.isArray(n)||(r=function(n,t){if(!n)return;if("string"===typeof n)return I(n,t);var r=Object.prototype.toString.call(n).slice(8,-1);"Object"===r&&n.constructor&&(r=n.constructor.name);if("Map"===r||"Set"===r)return Array.from(n);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return I(n,t)}(n))||t&&n&&"number"===typeof n.length){r&&(n=r);var e=0,i=function(){};return{s:i,n:function(){return e>=n.length?{done:!0}:{done:!1,value:n[e++]}},e:function(n){throw n},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,u=!1;return{s:function(){r=r.call(n)},n:function(){var n=r.next();return a=n.done,n},e:function(n){u=!0,o=n},f:function(){try{a||null==r.return||r.return()}finally{if(u)throw o}}}}function I(n,t){(null==t||t>n.length)&&(t=n.length);for(var r=0,e=new Array(t);r<t;r++)e[r]=n[r];return e}var _=function n(t){(0,S.Z)(this,n),this.variables=t},N=function(){function n(t,r){(0,S.Z)(this,n),this.variables=t,this.domains=r,(0,z.Z)(this,"constraints",new Map);var e,i=E(this.variables);try{for(i.s();!(e=i.n()).done;){var o=e.value;if(this.constraints.set(o,[]),!this.domains.has(o))throw new Error("Every variable should have a domain assigned to it, even if it's empty.")}}catch(a){i.e(a)}finally{i.f()}}return(0,A.Z)(n,[{key:"addConstraint",value:function(n){var t,r=E(n.variables);try{for(r.s();!(t=r.n()).done;){var e=t.value;if(!this.variables.includes(e))throw new Error("Variable in constraint was not defined in the solver.");this.constraints.get(e).push(n)}}catch(i){r.e(i)}finally{r.f()}}},{key:"consistent",value:function(n,t){var r,e=E(this.constraints.get(n));try{for(e.s();!(r=e.n()).done;){if(!r.value.satisfied(n,t))return!1}}catch(i){e.e(i)}finally{e.f()}return!0}},{key:"solve",value:function(n){return this.backtrackingSolve(n||new Map)}},{key:"backtrackingSolve",value:function(n){var t=this;if(n.size===this.variables.length)return n;var r,e=function(n,t){var r,e=void 0,i=Number.MAX_VALUE,o=y(n);try{for(o.s();!(r=o.n()).done;){var a=r.value,u=t(a);u<i&&(e=a,i=u)}}catch(c){o.e(c)}finally{o.f()}return e}(this.variables.filter((function(t){return!n.has(t)})),(function(n){return t.domains.get(n).length})),i=E(this.domains.get(e));try{for(i.s();!(r=i.n()).done;){var o=r.value,a=new Map(n);if(a.set(e,o),this.consistent(e,a)){var u=this.backtrackingSolve(a);if(u)return u}}}catch(c){i.e(c)}finally{i.f()}return null}}]),n}();function O(n,t){var r="undefined"!==typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(!r){if(Array.isArray(n)||(r=function(n,t){if(!n)return;if("string"===typeof n)return B(n,t);var r=Object.prototype.toString.call(n).slice(8,-1);"Object"===r&&n.constructor&&(r=n.constructor.name);if("Map"===r||"Set"===r)return Array.from(n);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return B(n,t)}(n))||t&&n&&"number"===typeof n.length){r&&(n=r);var e=0,i=function(){};return{s:i,n:function(){return e>=n.length?{done:!0}:{done:!1,value:n[e++]}},e:function(n){throw n},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,u=!1;return{s:function(){r=r.call(n)},n:function(){var n=r.next();return a=n.done,n},e:function(n){u=!0,o=n},f:function(){try{a||null==r.return||r.return()}finally{if(u)throw o}}}}function B(n,t){(null==t||t>n.length)&&(t=n.length);for(var r=0,e=new Array(t);r<t;r++)e[r]=n[r];return e}function T(n){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(n){return!1}}();return function(){var r,e=(0,M.Z)(n);if(t){var i=(0,M.Z)(this).constructor;r=Reflect.construct(e,arguments,i)}else r=e.apply(this,arguments);return(0,k.Z)(this,r)}}var R=function(n){(0,C.Z)(r,n);var t=T(r);function r(n,e){var i;return(0,S.Z)(this,r),(i=t.call(this,n)).gridSize=e,i}return(0,A.Z)(r,[{key:"satisfied",value:function(n,t){return!p(x(this.gridSize,n).filter((function(n){return t.has(n)})).map((function(n){return t.get(n)})))&&!p(b(this.gridSize,n).filter((function(n){return t.has(n)})).map((function(n){return t.get(n)})))}}]),r}(_),U=function(n){(0,C.Z)(r,n);var t=T(r);function r(n,e,i){var o;return(0,S.Z)(this,r),(o=t.call(this,n)).clues=e,o.gridSize=i,o}return(0,A.Z)(r,[{key:"satisfied",value:function(n,t){var r,e=O(j(this.gridSize,n));try{for(e.s();!(r=e.n()).done;){var i=r.value,o=this.clues[i];if(0!==o){var a=this.countVisible(t,i);if(!1!==a&&a!==o)return!1}}}catch(u){e.e(u)}finally{e.f()}return!0}},{key:"countVisible",value:function(n,t){for(var r=Z(this.gridSize,t),e=(0,d.Z)(r,2),i=e[0],o=e[1],a=0,u=0,c=0;c<this.gridSize&&u<this.gridSize;c++){var l=n.get(i+o*c);if(void 0===l)return!1;u<l&&(a++,u=l)}return a}}]),r}(_);function V(n,t){var r="undefined"!==typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(!r){if(Array.isArray(n)||(r=function(n,t){if(!n)return;if("string"===typeof n)return P(n,t);var r=Object.prototype.toString.call(n).slice(8,-1);"Object"===r&&n.constructor&&(r=n.constructor.name);if("Map"===r||"Set"===r)return Array.from(n);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return P(n,t)}(n))||t&&n&&"number"===typeof n.length){r&&(n=r);var e=0,i=function(){};return{s:i,n:function(){return e>=n.length?{done:!0}:{done:!1,value:n[e++]}},e:function(n){throw n},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,u=!1;return{s:function(){r=r.call(n)},n:function(){var n=r.next();return a=n.done,n},e:function(n){u=!0,o=n},f:function(){try{a||null==r.return||r.return()}finally{if(u)throw o}}}}function P(n,t){(null==t||t>n.length)&&(t=n.length);for(var r=0,e=new Array(t);r<t;r++)e[r]=n[r];return e}var $=r(2893),F=r.n($),X=r(4837),D=r(5893),L=(0,o.Z)((function(n){return{narrowButton:{minWidth:"30px",padding:"3px 4px"}}}));function W(n){var t=n.value,r=n.max,e=n.onChange,i=L();return(0,D.jsx)(D.Fragment,{children:(0,D.jsxs)(X.Z,{size:"small",children:[(0,D.jsx)(h.Z,{onClick:function(){return e(t+1)},disabled:t>=r,className:i.narrowButton,children:"+"}),t>0&&(0,D.jsx)(h.Z,{disabled:!0,className:i.narrowButton,children:t}),t>0&&(0,D.jsx)(h.Z,{onClick:function(){return e(t-1)},className:i.narrowButton,children:"-"})]})})}var G=r(9895);function q(n){var t=n.height;return(0,D.jsx)(G.Z,{children:(0,D.jsx)(v.kC,{width:100,height:100,alignItems:"center",justifyContent:"center",children:t>0&&(0,D.jsx)(c.Z,{variant:"h5",children:t})})})}function H(n){var t=n.size,r=n.clues,i=n.heights,o=n.onClueChange,a=(0,e.useMemo)((function(){return function(n,t){for(var r=0,e=0,i=1,o=0,a=0,u=t,c=[],l=0;l<t*t;l++){if(c[r+e*t]=n[l],++a>=Math.floor(u)){a=0,u-=.5;var f=[-o,i];i=f[0],o=f[1]}r+=i,e+=o}return c}(g(0,Math.pow(t+2,2)),t+2)}),[t]);return(0,D.jsx)(F(),{columns:"repeat(".concat(t+2,", 100px)"),gap:"8px",children:a.map((function(n){var e=function(n,t){return n%(t-1)===0||n>=4*(t-1)?null:n-Math.ceil(n/(t-1))}(n,t+2),a=4*(t+1),u=(0,D.jsx)("span",{});return n===a?(0,D.jsx)(v.xu,{style:{gridArea:"2 / 2 / ".concat(t+2," / ").concat(t+2)},children:(0,D.jsx)(F(),{columns:"repeat(".concat(t,", 100px)"),gap:"8px",children:i.map((function(n,t){return(0,D.jsx)(q,{height:n},t)}))})},"heights"):n>a?null:(null!==e&&(u=(0,D.jsx)(W,{value:r[e],max:t,onChange:function(n){return null===o||void 0===o?void 0:o(e,n)}})),(0,D.jsx)(v.kC,{width:100,height:100,alignItems:"center",justifyContent:"center",flexDirection:"column",children:u},n))}))})}var J=(0,o.Z)((function(n){return{toolarea:{position:"sticky",top:"10px"}}}));function K(){var n=(0,e.useState)(4),t=n[0],r=n[1],o=(0,e.useState)([]),y=o[0],m=o[1],p=(0,e.useState)([]),x=p[0],b=p[1],j=(0,e.useState)(null),S=j[0],A=j[1],C=J();(0,e.useEffect)((function(){m(Array(4*t).fill(0)),b(Array(Math.pow(t,2)).fill(0))}),[t]);return(0,D.jsx)(D.Fragment,{children:(0,D.jsxs)(v.kC,{justifyContent:"center",children:[(0,D.jsx)(v.xu,{children:(0,D.jsx)(H,{size:t,clues:y,heights:x,onClueChange:function(n,t){return m((function(r){return function(n,t,r){var e=(0,i.Z)(n);return e[t]=r,e}(r,n,t)}))}})}),(0,D.jsx)(v.xu,{ml:4,flex:"1 0",maxWidth:"600px",children:(0,D.jsxs)(a.Z,{className:C.toolarea,children:[(0,D.jsx)(u.Z,{children:(0,D.jsxs)(v.xu,{py:1,children:[(0,D.jsx)(c.Z,{gutterBottom:!0,children:"Grid Size"}),(0,D.jsx)(v.xu,{width:200,children:(0,D.jsxs)(l.Z,{container:!0,spacing:2,children:[(0,D.jsx)(l.Z,{item:!0,xs:!0,children:(0,D.jsx)(f.Z,{defaultValue:4,min:2,max:7,step:1,marks:!0,valueLabelDisplay:"auto",onChangeCommitted:function(n,t){return r(t)}})}),(0,D.jsxs)(l.Z,{item:!0,children:[t,"x",t]})]})})]})}),(0,D.jsxs)(s.Z,{children:[(0,D.jsx)(h.Z,{variant:"contained",color:"primary",onClick:function(){var n=function(n,t){var r,e=g(0,n*n-1),o=new Map,a=V(e);try{for(a.s();!(r=a.n()).done;){var u=r.value;o.set(u,g(1,n))}}catch(y){a.e(y)}finally{a.f()}function c(n,t){o.set(n,o.get(n).filter(t))}for(var l=new Map,f=function(r){var e=t[r];if(0===e)return"continue";var i=Z(n,r),a=(0,d.Z)(i,2),u=a[0],f=a[1];if(1===e){l.set(u,n),o.set(u,[]);var s,h=V(w(n,u));try{for(h.s();!(s=h.n()).done;){var v=s.value;v!==u&&c(v,(function(t){return t!==n}))}}catch(y){h.e(y)}finally{h.f()}}else if(e===n)for(var m=function(t){var r=u+f*t,e=t+1;l.set(r,e),o.set(r,[]);var i,a=V(w(n,r));try{for(a.s();!(i=a.n()).done;){var s=i.value;s!==r&&c(s,(function(n){return n!==e}))}}catch(y){a.e(y)}finally{a.f()}},p=0;p<n;p++)m(p);else for(var g=function(t){c(u+f*t,(function(r){return r<=n-e+t+1}))},x=0;x<n;x++)g(x)},s=0;s<4*n;s++)f(s);var h=new N(e,o);h.addConstraint(new R(e,n)),h.addConstraint(new U(e,t,n));var v=h.solve(l);return v?(0,i.Z)(Array(n*n).keys()).map((function(n){return v.get(n)})):null}(t,y);n?(b(n),A(!0)):(b((function(n){return(0,i.Z)(n.fill(0))})),A(!1))},children:"Solve Puzzle"}),(0,D.jsx)(h.Z,{variant:"text",color:"default",onClick:function(){m((function(n){return(0,i.Z)(n.fill(0))})),b((function(n){return(0,i.Z)(n.fill(0))})),A(null)},children:"Clear All"}),!1===S&&(0,D.jsx)(c.Z,{color:"error",children:"No solution found."})]})]})})]})})}function Q(){return(0,D.jsx)(D.Fragment,{children:(0,D.jsx)(K,{})})}},5301:function(n,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return r(881)}])}},function(n){n.O(0,[542,774,888,179],(function(){return t=5301,n(n.s=t);var t}));var t=n.O();_N_E=t}]);